<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Focus CaseX - Contact Lens Case</title>
    
    <!-- PDF Library CDNs - IMPORTANT: Keep these here in each HTML file -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        /* Base Styles */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
            background-color: #f4f7f6;
        }

        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background-color: #004d80;
            color: white;
            padding: 15px 20px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        header h1 {
            margin: 0;
            font-size: 1.8em;
        }

        nav {
            margin-top: 10px;
            display: flex;
            flex-wrap: wrap; /* Allow nav items to wrap */
            justify-content: center;
            gap: 10px; /* Space between nav items */
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 5px 10px;
            font-weight: bold;
            border-radius: 4px;
            transition: background-color 0.2s ease;
        }

        nav a:hover {
            background-color: #0056b3;
            text-decoration: none;
        }

        main.case-sheet-container {
            flex-grow: 1; /* Allows main content to expand and push footer down */
            /* --- MODIFICATION FOR LARGER DESKTOP SIZE --- */
            width: 95vw; /* Make it take up 95% of the viewport width */
            /* max-width: 1200px;  -- Removed/Modified for full desktop size */
            margin: 20px auto; /* Center the container and add vertical space */
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .form-actions {
            display: flex;
            justify-content: flex-end; /* Align buttons to the right */
            gap: 10px;
            margin-bottom: 20px;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .form-actions button {
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background-color: #004d80;
            color: white;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.2s ease;
        }

        .form-actions button:hover {
            background-color: #0056b3;
        }

        /* Fieldset Styling */
        fieldset.section {
            border: 1px solid #ced4da;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 25px;
            background-color: #f8f9fa;
        }

        fieldset.section legend {
            font-size: 1.2em;
            font-weight: bold;
            color: #004d80;
            padding: 0 10px;
            background-color: white; /* To make legend stand out */
            border-radius: 3px;
            margin-left: 10px;
        }

        /* Form Group Layout - Using Grid for main fieldset content */
        fieldset.section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* Responsive 2-column or more */
            gap: 20px; /* Space between grid items (form groups) */
        }

        /* Specific overrides for sections that need full width or a different internal layout */
        .form-group {
            /* Base styling for all form groups */
            margin-bottom: 0; /* Managed by grid gap */
        }

        /* Ensure certain form groups (like textarea for HPI, POH, etc.) span full width */
        .form-group:has(textarea[name="motivationForCL"]),
        .form-group:has(textarea[name="chiefComplaint"]),
        .form-group:has(textarea[name="hpi"]),
        .form-group:has(textarea[name="previousCLHistory"]),
        .form-group:has(textarea[name="compliance"]),
        .form-group:has(textarea[name="slitLampWithCls"]),
        .form-group:has(textarea[name="conjunctivalFindings_details"]),
        .form-group:has(textarea[name="stainingOD_details"]),
        .form-group:has(textarea[name="stainingOS_details"]),
        .form-group:has(textarea[name="infiltratesUlcersOD_details"]),
        .form-group:has(textarea[name="infiltratesUlcersOS_details"]),
        .form-group:has(textarea[name="cornealNVOD_details"]),
        .form-group:has(textarea[name="cornealNVOS_details"]),
        .form-group:has(textarea[name="assessmentDiagnoses"]),
        .form-group:has(textarea[name="plan"]),
        .form-group:has(textarea[name="contactLensRx"]),
        .form-group:has(textarea[name="prognosis"]),
        .form-group:has(textarea[name="followUpInstructions"]),
        .form-group:has(textarea[name="internalNotes"]),
        .form-group:has(textarea[name="notesReflection"]) {
            grid-column: 1 / -1; /* Make these textareas span all columns */
        }

        /* Headings for VA, Keratometry, Refraction */
        .va-label, .refraction-label, .keratometry-label {
            grid-column: 1 / -1; /* Span full width */
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 15px;
            margin-bottom: 5px;
            color: #004d80;
        }

        /* Flexbox for rows within grid sections (like VA, Keratometry, Refraction) */
        .va-row, .refraction-row, .keratometry-row {
            grid-column: 1 / -1; /* Span full width within the fieldset grid */
            display: flex;
            flex-wrap: wrap; /* Allow items to wrap on smaller screens */
            gap: 15px; /* Space between items in the row */
            margin-bottom: 10px; /* Space between flex rows */
            align-items: flex-end; /* Align items to the bottom of the row if they have different heights */
        }

        .va-item, .refraction-row .form-group {
            flex: 1; /* Distribute space equally */
            min-width: 250px; /* Minimum width before wrapping */
        }

        /* Specific styling for the OD/OS pair within keratometry */
        .keratometry-row .od-os-pair {
            display: flex;
            flex: 1;
            gap: 10px;
            min-width: 280px; /* Ensure pair doesn't get too small */
            flex-wrap: wrap; /* Allow K1, K2, Axis to wrap */
        }
        .keratometry-row .od-os-pair .form-group {
            flex: 1; /* K1, K2, Axis share space within the pair */
            min-width: 80px; /* Min width for kera inputs */
        }

        /* Inline input groups (radio/checkbox) */
        .input-group-inline {
            display: flex;
            flex-wrap: wrap;
            gap: 15px; /* Space between inline options */
            margin-top: 5px;
            align-items: center;
        }
        .input-group-inline input[type="radio"],
        .input-group-inline input[type="checkbox"] {
            width: auto; /* Override 100% width */
            margin-right: 5px;
        }

        /* Conditional Group Styling */
        .conditional-group {
            margin-top: 10px;
            padding: 0 10px; /* Adjust padding for collapsed state */
            border-left: 3px solid #004d80;
            background-color: #e9f5ff;
            border-radius: 4px;
            transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out, padding 0.3s ease-in-out;
            max-height: 0; /* Start collapsed */
            overflow: hidden;
            opacity: 0;
            pointer-events: none; /* Prevent interaction when hidden */
            box-sizing: border-box; /* Ensure padding is included in max-height */
        }

        /* Use JavaScript to toggle aria-expanded="true" when condition is met */
        .conditional-group[aria-expanded="true"] {
            max-height: 150px; /* A sufficiently large value for textareas/inputs, adjust as needed */
            opacity: 1;
            pointer-events: auto;
            padding: 10px; /* Restore padding when expanded */
            margin-top: 10px; /* Restore margin when expanded */
        }

        /* Input Styles */
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #495057;
        }

        input[type="text"],
        input[type="number"],
        input[type="date"],
        input[type="tel"],
        input[type="email"],
        textarea,
        select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 1em;
            color: #495057;
            background-color: #fff;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }

        input:focus, textarea:focus, select:focus {
            border-color: #80bdff;
            outline: 0;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }

        textarea {
            min-height: 40px; /* Default min-height for textareas */
            resize: vertical;
        }

        footer {
            background-color: #343a40;
            color: white;
            text-align: center;
            padding: 15px 20px;
            margin-top: auto; /* Pushes footer to the bottom */
            box-shadow: 0 -2px 4px rgba(0,0,0,0.1);
        }

        footer p {
            margin: 5px 0;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            nav a {
                margin: 5px;
            }
            main.case-sheet-container {
                margin: 10px;
                padding: 15px;
                width: auto; /* Revert to auto width on small screens to fit content */
            }
            fieldset.section {
                grid-template-columns: 1fr; /* Stack columns on small screens */
            }
            .va-row, .refraction-row, .keratometry-row {
                flex-direction: column; /* Stack items in rows on small screens */
                gap: 10px;
            }
            .va-item, .refraction-row .form-group, .keratometry-row .od-os-pair {
                min-width: unset; /* Allow full width */
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Focus CaseX - Contact Lens Case</h1>
        <nav>
            <a href="index.html">Back to Case Selection</a>
            <a href="general-case.html">General</a>
            <a href="certificate-case.html">Certificate</a>
            <a href="emergency-case.html">Emergency</a>
            <a href="followup-case.html">Follow-up</a>
            <a href="contactlens-case.html">Contact Lens</a>
            <a href="orthoptics-case.html">Orthoptics</a>
            <a href="lowvision-case.html">Low Vision</a>
            <a href="surgicalcomanagement-case.html">Surgical Co-management</a>
            <a href="pediatricoptometry-case.html">Pediatric Optometry</a>
            <a href="ocularsurfacedisease-case.html">Ocular Surface Disease</a>
            <a href="myopiamanagement-case.html">Myopia Management</a>
            <a href="neurooptometry-case.html">Neuro-Optometry & Rehab</a>
        </nav>
    </header>

    <main class="case-sheet-container">
        <form id="optometryCaseForm">
            <input type="hidden" name="caseType" value="contactlens">

            <!-- FORM ACTIONS AT THE TOP -->
            <div class="form-actions form-actions-top">
                <button type="button" id="clearForm">Clear Form</button>
                <button type="submit" id="saveCase">Save Case</button>
                <button type="button" id="downloadPdf">Download PDF</button>
            </div>

            <fieldset class="section">
                <legend>Patient Info</legend>
                <div class="form-group">
                    <label for="patientId">Patient ID (Optional)</label>
                    <input type="text" id="patientId" name="patientId" placeholder="e.g., P00123" value="CL-042-SMITH">
                </div>
                <div class="form-group">
                    <label for="patientName">Name <sup>*</sup></label>
                    <input type="text" id="patientName" name="patientName" placeholder="e.g., Jane Doe" required aria-required="true" autofocus value="Sarah Smith">
                </div>
                <div class="form-group">
                    <label for="dateOfBirth">Date of Birth <sup>*</sup></label>
                    <input type="date" id="dateOfBirth" name="dateOfBirth" required aria-required="true" value="1998-11-20">
                </div>
                <div class="form-group">
                    <label for="clPatientProfile">CL Patient Profile <sup>*</sup></label>
                    <select id="clPatientProfile" name="clPatientProfile" required aria-required="true">
                        <option value="">Select...</option>
                        <option value="New Fitter">New Fitter</option>
                        <option value="Existing Patient" selected>Existing Patient</option>
                        <option value="Problem Fitter">Problem Fitter</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="motivationForCL">Motivation for CL Wear</label>
                    <textarea id="motivationForCL" name="motivationForCL" rows="2" placeholder="e.g., Sports, Cosmesis, full visual field.">Comfort issues with current lenses; occasional dryness and blurred vision after 8 hours of wear. Wants to continue daily disposable wear for sports.</textarea>
                </div>
                <div class="form-group">
                    <label for="lensModalityPreference">Lens Modality Preference (for new fits)</label>
                    <select id="lensModalityPreference" name="lensModalityPreference">
                        <option value="">Select...</option>
                        <option value="Daily Disposable" selected>Daily Disposable</option>
                        <option value="Reusable">Reusable</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="lensMaterialPreference">Lens Material Preference</label>
                    <select id="lensMaterialPreference" name="lensMaterialPreference">
                        <option value="">Select...</option>
                        <option value="Hydrogel">Hydrogel</option>
                        <option value="Silicone Hydrogel" selected>Silicone Hydrogel</option>
                        <option value="RGP">RGP</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
            </fieldset>

            <fieldset class="section">
                <legend>Chief Complaint (CC)</legend>
                <div class="form-group">
                    <label for="chiefComplaint">Chief Complaint <sup>*</sup></label>
                    <textarea id="chiefComplaint" name="chiefComplaint" rows="2" placeholder="e.g., Wants to try contact lenses. / Current lenses uncomfortable by end of day." required aria-required="true">Reports discomfort and dryness with current contact lenses (Acuvue Oasys 1-Day) by late afternoon. Vision sometimes fluctuating.</textarea>
                </div>
                <div class="form-group">
                    <label for="hpi">History of Present Illness (HPI)</label>
                    <textarea id="hpi" name="hpi" rows="3" placeholder="Onset, duration, severity of symptoms with CLs.">Patient has worn Acuvue Oasys 1-Day for 2 years. Recently started experiencing increased dryness and awareness of lenses after 8 hours. Often feels the need to remove lenses earlier than planned. Denies redness, pain, or photophobia, but notes occasional blurry vision which clears with a blink. Works on computer 6-8 hours daily.</textarea>
                </div>
                <div class="form-group">
                    <label>CL Related Symptoms (Check all that apply)</label>
                    <div class="input-group-inline">
                        <input type="checkbox" id="cl_dryness" name="cl_dryness" value="Dryness" checked><label for="cl_dryness">Dryness</label>
                        <input type="checkbox" id="cl_redness" name="cl_redness" value="Redness"><label for="cl_redness">Redness</label>
                        <input type="checkbox" id="cl_blurryVision" name="cl_blurryVision" value="Blurry Vision" checked><label for="cl_blurryVision">Blurry Vision</label>
                        <input type="checkbox" id="cl_discomfort" name="cl_discomfort" value="Discomfort" checked><label for="cl_discomfort">Discomfort</label>
                        <input type="checkbox" id="cl_itching" name="cl_itching" value="Itching"><label for="cl_itching">Itching</label>
                        <input type="checkbox" id="cl_glare" name="cl_glare" value="Glare"><label for="cl_glare">Glare</label>
                        <input type="checkbox" id="cl_haze" name="cl_haze" value="Haze"><label for="cl_haze">Haze</label>
                    </div>
                </div>
            </fieldset>

            <fieldset class="section">
                <legend>Contact Lens History (if applicable)</legend>
                <div class="form-group">
                    <label for="previousCLHistory">Previous CL History</label>
                    <textarea id="previousCLHistory" name="previousCLHistory" rows="2" placeholder="e.g., Wore soft lenses 5 years ago, discontinued due to dryness.">Wore various daily disposable soft lenses since age 16. Switched to Acuvue Oasys 1-Day 2 years ago for better comfort, but now experiencing issues.</textarea>
                </div>
                <div class="form-group">
                    <label for="currentCLType">Current CL Type</label>
                    <input type="text" id="currentCLType" name="currentCLType" placeholder="e.g., Soft Spherical, RGP" value="Soft Spherical Daily Disposable">
                </div>
                <div class="form-group">
                    <label for="currentCLBrand">Current CL Brand/Parameters</label>
                    <input type="text" id="currentCLBrand" name="currentCLBrand" placeholder="e.g., Acuvue Oasys, -3.00 DS, BC 8.4, DIA 14.0" value="Acuvue Oasys 1-Day, OD -3.00 DS, OS -3.25 DS, BC 8.5, DIA 14.3">
                </div>
                <div class="form-group">
                    <label for="wearSchedule">Wear Schedule</label>
                    <input type="text" id="wearSchedule" name="wearSchedule" placeholder="e.g., Daily wear, 12 hours/day, 6 days/week" value="Daily wear, 10-12 hours/day, 7 days/week">
                </div>
                <div class="form-group">
                    <label for="replacementSchedule">Replacement Schedule</label>
                    <select id="replacementSchedule" name="replacementSchedule">
                        <option value="">Select...</option>
                        <option value="daily" selected>Daily</option>
                        <option value="bi-weekly">Bi-weekly</option>
                        <option value="monthly">Monthly</option>
                        <option value="quarterly">Quarterly</option>
                        <option value="annually">Annually</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="compliance">Compliance (with replacement/cleaning)</label>
                    <textarea id="compliance" name="compliance" rows="2" placeholder="e.g., Reports good compliance. / Sometimes sleeps in lenses.">Reports good compliance with daily replacement. Uses Refresh Optive Fusion eye drops PRN.</textarea>
                </div>
                <div class="form-group">
                    <label for="careSystemUsed">Care System Used (for reusable)</label>
                    <select id="careSystemUsed" name="careSystemUsed">
                        <option value="">Select...</option>
                        <option value="Multi-purpose solution">Multi-purpose solution</option>
                        <option value="Hydrogen Peroxide">Hydrogen Peroxide</option>
                        <option value="None (Daily Disposable)" selected>None (Daily Disposable)</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Sleeps in Lenses?</label>
                    <div class="input-group-inline">
                        <input type="radio" id="sleepsInLensesYes" name="sleepsInLenses" value="Yes">
                        <label for="sleepsInLensesYes">Yes</label>
                        <input type="radio" id="sleepsInLensesNo" name="sleepsInLenses" value="No" checked>
                        <label for="sleepsInLensesNo">No</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Swims/Showers in Lenses?</label>
                    <div class="input-group-inline">
                        <input type="radio" id="swimsInLensesYes" name="swimsInLenses" value="Yes">
                        <label for="swimsInLensesYes">Yes</label>
                        <input type="radio" id="swimsInLensesNo" name="swimsInLenses" value="No" checked>
                        <label for="swimsInLensesNo">No</label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="complianceReplacementSchedule">Compliance with Replacement Schedule</label>
                    <select id="complianceReplacementSchedule" name="complianceReplacementSchedule">
                        <option value="On Time" selected>On Time</option>
                        <option value="Overworn">Overworn</option>
                        <option value="Underworn">Underworn</option>
                    </select>
                </div>
            </fieldset>

            <fieldset class="section">
                <legend>Examination (Contact Lens Focused)</legend>

                <div class="va-label">Visual Acuity (with current/trial CLs)</div>
                <div class="va-row">
                    <div class="form-group va-item">
                        <label>VA with CLs OD</label>
                        <input type="text" name="vaWithClsOD" placeholder="e.g., 20/20 (6/6)" value="20/25">
                    </div>
                    <div class="form-group va-item">
                        <label>VA with CLs OS</label>
                        <input type="text" name="vaWithClsOS" placeholder="e.g., 20/20 (6/6)" value="20/25">
                    </div>
                </div>
                <div class="va-row">
                    <div class="form-group va-item">
                        <label>Near VA with CLs OD</label>
                        <input type="text" name="vaNearWithClsOD" placeholder="e.g., J1+ / N4" value="J1 / N4">
                    </div>
                    <div class="form-group va-item">
                        <label>Near VA with CLs OS</label>
                        <input type="text" name="vaNearWithClsOS" placeholder="e.g., J2 / N5" value="J1 / N4">
                    </div>
                </div>
                <div class="va-row">
                    <div class="form-group va-item">
                        <label for="overRefractionOD">Over-Refraction OD</label>
                        <input type="text" id="overRefractionOD" name="overRefractionOD" placeholder="e.g., +0.25DS" value="PL">
                    </div>
                    <div class="form-group va-item">
                        <label for="overRefractionOS">Over-Refraction OS</label>
                        <input type="text" id="overRefractionOS" name="overRefractionOS" placeholder="e.g., PL -0.25 x 180" value="PL -0.25DS">
                    </div>
                </div>
                <div class="va-row">
                    <div class="form-group va-item">
                        <label for="finalVaOverRefractionOD">Final VA with ORx OD</label>
                        <input type="text" id="finalVaOverRefractionOD" name="finalVaOverRefractionOD" placeholder="e.g., 20/20 (6/6)" value="20/20">
                    </div>
                    <div class="form-group va-item">
                        <label for="finalVaOverRefractionOS">Final VA with ORx OS</label>
                        <input type="text" id="finalVaOverRefractionOS" name="finalVaOverRefractionOS" placeholder="e.g., 20/20 (6/6)" value="20/20">
                    </div>
                </div>
                <div class="refraction-label">Manifest Refraction (Spectacle Rx)</div>
                <div class="refraction-row">
                    <div class="form-group">
                        <label>MRx OD (Sphere/Cyl/Axis/Add)</label>
                        <input type="text" name="manifestRefractionOD" placeholder="e.g., -2.00 -0.50 x 180 Add +2.00" value="-3.00 DS">
                    </div>
                    <div class="form-group">
                        <label>MRx OS (Sphere/Cyl/Axis/Add)</label>
                        <input type="text" name="manifestRefractionOS" placeholder="e.g., -1.75 DS Add +2.00" value="-3.50 DS">
                    </div>
                </div>

                <div class="keratometry-label">Keratometry</div>
                <div class="keratometry-row">
                    <div class="od-os-pair">
                        <div class="form-group">
                            <label for="k1OD">K1 OD (Diopters)</label>
                            <input type="text" id="k1OD" name="k1OD" placeholder="e.g., 43.50" value="43.25">
                        </div>
                        <div class="form-group">
                            <label for="k2OD">K2 OD (Diopters)</label>
                            <input type="text" id="k2OD" name="k2OD" placeholder="e.g., 44.00" value="44.00">
                        </div>
                        <div class="form-group">
                            <label for="axisOD">Axis OD</label>
                            <input type="number" id="axisOD" name="axisOD" min="1" max="180" placeholder="e.g., 180" value="180">
                        </div>
                    </div>
                    <div class="od-os-pair">
                        <div class="form-group">
                            <label for="k1OS">K1 OS (Diopters)</label>
                            <input type="text" id="k1OS" name="k1OS" placeholder="e.g., 43.75" value="43.50">
                        </div>
                        <div class="form-group">
                            <label for="k2OS">K2 OS (Diopters)</label>
                            <input type="text" id="k2OS" name="k2OS" placeholder="e.g., 44.25" value="44.50">
                        </div>
                        <div class="form-group">
                            <label for="axisOS">Axis OS</label>
                            <input type="number" id="axisOS" name="axisOS" min="1" max="180" placeholder="e.g., 175" value="175">
                        </div>
                    </div>
                </div>

                <div class="va-row">
                    <div class="form-group va-item">
                        <label for="hvidOD">HVID OD (mm)</label>
                        <input type="number" id="hvidOD" name="hvidOD" step="0.1" placeholder="e.g., 11.8" value="12.0">
                    </div>
                    <div class="form-group va-item">
                        <label for="hvidOS">HVID OS (mm)</label>
                        <input type="number" id="hvidOS" name="hvidOS" step="0.1" placeholder="e.g., 11.7" value="11.9">
                    </div>
                </div>
                <div class="va-row">
                    <div class="form-group va-item">
                        <label for="tbutOD">Tear Break-Up Time (TBUT) OD (sec)</label>
                        <input type="number" id="tbutOD" name="tbutOD" placeholder="e.g., 5" value="4">
                    </div>
                    <div class="form-group va-item">
                        <label for="tbutOS">Tear Break-Up Time (TBUT) OS (sec)</label>
                        <input type="number" id="tbutOS" name="tbutOS" placeholder="e.g., 6" value="5">
                    </div>
                </div>

                <div class="va-label">Lens Fit Assessment (with CLs IN)</div>
                <div class="va-row">
                    <div class="form-group">
                        <label for="clFitCentrationOD">Centration OD</label>
                        <select id="clFitCentrationOD" name="clFitCentrationOD">
                            <option value="Good" selected>Good</option>
                            <option value="Slightly Decentered">Slightly Decentered</option>
                            <option value="Markedly Decentered">Markedly Decentered</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="clFitCentrationOS">Centration OS</label>
                        <select id="clFitCentrationOS" name="clFitCentrationOS">
                            <option value="Good" selected>Good</option>
                            <option value="Slightly Decentered">Slightly Decentered</option>
                            <option value="Markedly Decentered">Markedly Decentered</option>
                        </select>
                    </div>
                </div>
                <div class="va-row">
                    <div class="form-group">
                        <label for="clFitMovementOD">Movement OD (with blink)</label>
                        <select id="clFitMovementOD" name="clFitMovementOD">
                            <option value="Optimal">Optimal</option>
                            <option value="Tight (<0.5mm)" selected>Tight (&lt;0.5mm)</option>
                            <option value="Loose (>1mm)">Loose (&gt;1mm)</option>
                            <option value="Excessive">Excessive</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="clFitMovementOS">Movement OS (with blink)</label>
                        <select id="clFitMovementOS" name="clFitMovementOS">
                            <option value="Optimal" selected>Optimal</option>
                            <option value="Tight (<0.5mm)">Tight (&lt;0.5mm)</option>
                            <option value="Loose (>1mm)">Loose (&gt;1mm)</option>
                            <option value="Excessive">Excessive</option>
                        </select>
                    </div>
                </div>
                <div class="va-row">
                    <div class="form-group">
                        <label for="clFitCoverageOD">Coverage OD</label>
                        <select id="clFitCoverageOD" name="clFitCoverageOD">
                            <option value="Full" selected>Full</option>
                            <option value="Partial">Partial</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="clFitCoverageOS">Coverage OS</label>
                        <select id="clFitCoverageOS" name="clFitCoverageOS">
                            <option value="Full" selected>Full</option>
                            <option value="Partial">Partial</option>
                        </select>
                    </div>
                </div>
                <div class="va-row">
                    <div class="form-group va-item">
                        <label for="clFitRotationOD">Rotation OD (for toric)</label>
                        <input type="text" id="clFitRotationOD" name="clFitRotationOD" placeholder="e.g., Stable, 10 deg temporal" value="Stable">
                    </div>
                    <div class="form-group va-item">
                        <label for="clFitRotationOS">Rotation OS (for toric)</label>
                        <input type="text" id="clFitRotationOS" name="clFitRotationOS" placeholder="e.g., Stable, 5 deg nasal" value="Stable">
                    </div>
                </div>

                <div class="form-group">
                    <label for="slitLampWithCls">Slit Lamp with CLs IN (if applicable)</label>
                    <textarea id="slitLampWithCls" name="slitLampWithCls" rows="3" placeholder="e.g., OD: Good centration, 0.5mm movement. No staining. OS: Mild 3 & 9 staining.">OD: Good lens condition. Mild diffuse superficial punctate keratitis (SPK) 1+ inferior. OS: Good lens condition. Mild localized SPK 2+ at 6 o'clock. Mild papillary conjunctivitis 1+ superior tarsal.</textarea>
                </div>
                <div class="form-group">
                    <label>Corneal Staining OD?</label>
                    <div class="input-group-inline">
                        <input type="radio" id="stainingOD_yes" name="cornealStainingOD" value="Yes" aria-controls="stainingOD_details" checked>
                        <label for="stainingOD_yes">Yes</label>
                        <input type="radio" id="stainingOD_no" name="cornealStainingOD" value="No" aria-controls="stainingOD_details">
                        <label for="stainingOD_no">No</label>
                    </div>
                    <input type="text" id="stainingOD_details" name="stainingOD_details" placeholder="Location, Severity (e.g., 3&9 SPK, 1+)" class="conditional-group" aria-expanded="true" aria-describedby="stainingOD_yes stainingOD_no" value="1+ inferior diffuse SPK">
                </div>
                 <div class="form-group">
                    <label>Corneal Staining OS?</label>
                    <div class="input-group-inline">
                        <input type="radio" id="stainingOS_yes" name="cornealStainingOS" value="Yes" aria-controls="stainingOS_details" checked>
                        <label for="stainingOS_yes">Yes</label>
                        <input type="radio" id="stainingOS_no" name="cornealStainingOS" value="No" aria-controls="stainingOS_details">
                        <label for="stainingOS_no">No</label>
                    </div>
                    <input type="text" id="stainingOS_details" name="stainingOS_details" placeholder="Location, Severity (e.g., 3&9 SPK, 1+)" class="conditional-group" aria-expanded="true" aria-describedby="stainingOS_yes stainingOS_no" value="2+ at 6 o'clock localized SPK">
                </div>
                <div class="form-group">
                    <label for="infiltratesUlcersOD">Infiltrates/Ulcers OD?</label>
                    <div class="input-group-inline">
                        <input type="radio" id="infiltratesUlcersODYes" name="infiltratesUlcersOD" value="Yes" aria-controls="infiltratesUlcersOD_details">
                        <label for="infiltratesUlcersODYes">Yes</label>
                        <input type="radio" id="infiltratesUlcersODNo" name="infiltratesUlcersOD" value="No" checked aria-controls="infiltratesUlcersOD_details">
                        <label for="infiltratesUlcersODNo">No</label>
                    </div>
                    <textarea id="infiltratesUlcersOD_details" name="infiltratesUlcersOD_details" rows="1" placeholder="Size, Location, Sterile/Infectious suspected." class="conditional-group" aria-expanded="false" aria-describedby="infiltratesUlcersODYes infiltratesUlcersODNo"></textarea>
                </div>
                <div class="form-group">
                    <label for="infiltratesUlcersOS">Infiltrates/Ulcers OS?</label>
                    <div class="input-group-inline">
                        <input type="radio" id="infiltratesUlcersOSYes" name="infiltratesUlcersOS" value="Yes" aria-controls="infiltratesUlcersOS_details">
                        <label for="infiltratesUlcersOSYes">Yes</label>
                        <input type="radio" id="infiltratesUlcersOSNo" name="infiltratesUlcersOS" value="No" checked aria-controls="infiltratesUlcersOS_details">
                        <label for="infiltratesUlcersOSNo">No</label>
                    </div>
                    <textarea id="infiltratesUlcersOS_details" name="infiltratesUlcersOS_details" rows="1" placeholder="Size, Location, Sterile/Infectious suspected." class="conditional-group" aria-expanded="false" aria-describedby="infiltratesUlcersOSYes infiltratesUlcersOSNo"></textarea>
                </div>
                <div class="form-group">
                    <label for="cornealNVOD">Corneal Neovascularization (NV) OD?</label>
                    <div class="input-group-inline">
                        <input type="radio" id="cornealNVODYes" name="cornealNVOD" value="Yes" aria-controls="cornealNVOD_details">
                        <label for="cornealNVODYes">Yes</label>
                        <input type="radio" id="cornealNVODNo" name="cornealNVOD" value="No" checked aria-controls="cornealNVOD_details">
                        <label for="cornealNVODNo">No</label>
                    </div>
                    <textarea id="cornealNVOD_details" name="cornealNVOD_details" rows="1" placeholder="Extent (mm), Location." class="conditional-group" aria-expanded="false" aria-describedby="cornealNVODYes cornealNVODNo"></textarea>
                </div>
                 <div class="form-group">
                    <label for="cornealNVOS">Corneal Neovascularization (NV) OS?</label>
                    <div class="input-group-inline">
                        <input type="radio" id="cornealNVOSYes" name="cornealNVOS" value="Yes" aria-controls="cornealNVOS_details">
                        <label for="cornealNVOSYes">Yes</label>
                        <input type="radio" id="cornealNVOSNo" name="cornealNVOS" value="No" checked aria-controls="cornealNVOS_details">
                        <label for="cornealNVOSNo">No</label>
                    </div>
                    <textarea id="cornealNVOS_details" name="cornealNVOS_details" rows="1" placeholder="Extent (mm), Location." class="conditional-group" aria-expanded="false" aria-describedby="cornealNVOSYes cornealNVOSNo"></textarea>
                </div>
                <div class="form-group">
                    <label>Lid Eversion Performed? <sup>*</sup></label>
                    <div class="input-group-inline">
                        <input type="radio" id="lidEversionPerformedYes" name="lidEversionPerformed" value="Yes" required aria-required="true" aria-controls="conjunctivalFindings_group" checked>
                        <label for="lidEversionPerformedYes">Yes</label>
                        <input type="radio" id="lidEversionPerformedNo" name="lidEversionPerformed" value="No" required aria-required="true" aria-controls="conjunctivalFindings_group">
                        <label for="lidEversionPerformedNo">No</label>
                    </div>
                </div>
                <div class="form-group conditional-group" id="conjunctivalFindings_group" aria-expanded="true" aria-describedby="lidEversionPerformedYes lidEversionPerformedNo">
                    <label for="conjunctivalFindings">Conjunctival Findings (Lid Eversion)</label>
                    <select id="conjunctivalFindings" name="conjunctivalFindings" aria-controls="conjunctivalFindings_details">
                        <option value="WNL">WNL</option>
                        <option value="Papillae 1+" selected>Papillae 1+</option>
                        <option value="Papillae 2+">Papillae 2+</option>
                        <option value="Papillae 3+">Papillae 3+</option>
                        <option value="Follicles">Follicles</option>
                        <option value="Other">Other (describe below)</option>
                    </select>
                    <textarea id="conjunctivalFindings_details" name="conjunctivalFindings_details" rows="2" placeholder="Describe other findings." class="conditional-group" aria-expanded="false" aria-describedby="conjunctivalFindings"></textarea>
                </div>
                <div class="form-group">
                    <label for="lidWiperEpitheliopathyOD">Lid Wiper Epitheliopathy (LWE) OD</label>
                    <select id="lidWiperEpitheliopathyOD" name="lidWiperEpitheliopathyOD">
                        <option value="None">None</option>
                        <option value="Mild" selected>Mild</option>
                        <option value="Moderate">Moderate</option>
                        <option value="Severe">Severe</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="lidWiperEpitheliopathyOS">Lid Wiper Epitheliopathy (LWE) OS</label>
                    <select id="lidWiperEpitheliopathyOS" name="lidWiperEpitheliopathyOS">
                        <option value="None">None</option>
                        <option value="Mild">Mild</option>
                        <option value="Moderate" selected>Moderate</option>
                        <option value="Severe">Severe</option>
                    </select>
                </div>

                <div class="va-label">Contact Lens Parameters (Trial/New Rx)</div>
                <div class="form-group">
                    <label for="clLensType">Lens Type</label>
                    <select id="clLensType" name="clLensType">
                        <option value="">Select...</option>
                        <option value="soft-spherical" selected>Soft Spherical</option>
                        <option value="soft-toric">Soft Toric</option>
                        <option value="soft-multifocal">Soft Multifocal</option>
                        <option value="rgp">RGP</option>
                        <option value="scleral">Scleral</option>
                        <option value="hybrid">Hybrid</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="clMaterial">Material</label>
                    <input type="text" id="clMaterial" name="clMaterial" placeholder="e.g., Silicone Hydrogel" value="Samfilcon A (Silicone Hydrogel)">
                </div>
                <div class="form-group">
                    <label for="clBrand">Brand</label>
                    <input type="text" id="clBrand" name="clBrand" placeholder="e.g., Dailies Total 1" value="MyDay Daily Disposable">
                </div>
                <div class="va-row">
                    <div class="form-group va-item">
                        <label for="clBcOD">Base Curve (BC) OD</label>
                        <input type="text" id="clBcOD" name="clBcOD" placeholder="e.g., 8.5" value="8.4">
                    </div>
                    <div class="form-group va-item">
                        <label for="clBcOS">Base Curve (BC) OS</label>
                        <input type="text" id="clBcOS" name="clBcOS" placeholder="e.g., 8.5" value="8.4">
                    </div>
                </div>
                <div class="va-row">
                    <div class="form-group va-item">
                        <label for="clDiaOD">Diameter (DIA) OD</label>
                        <input type="text" id="clDiaOD" name="clDiaOD" placeholder="e.g., 14.1" value="14.2">
                    </div>
                    <div class="form-group va-item">
                        <label for="clDiaOS">Diameter (DIA) OS</label>
                        <input type="text" id="clDiaOS" name="clDiaOS" placeholder="e.g., 14.1" value="14.2">
                    </div>
                </div>
                <div class="va-row">
                    <div class="form-group va-item">
                        <label for="clWaterContent">Water Content (%)</label>
                        <input type="number" id="clWaterContent" name="clWaterContent" step="0.1" placeholder="e.g., 55" value="49">
                    </div>
                     <div class="form-group va-item">
                        <label for="clDk_tValue">Dk/t Value</label>
                        <input type="text" id="clDk_tValue" name="clDk_tValue" placeholder="e.g., 150" value="100">
                    </div>
                </div>
                <div class="va-row">
                    <div class="form-group va-item">
                        <label for="clPowerOD">Power OD</label>
                        <input type="text" id="clPowerOD" name="clPowerOD" placeholder="e.g., -3.00 -0.75 x 180" value="-3.00 DS">
                    </div>
                    <div class="form-group va-item">
                        <label for="clPowerOS">Power OS</label>
                        <input type="text" id="clPowerOS" name="clPowerOS" placeholder="e.g., -3.25 DS" value="-3.25 DS">
                    </div>
                </div>
                 <div class="va-row">
                    <div class="form-group va-item">
                        <label for="clAddOD">Add (for multifocal) OD</label>
                        <input type="text" id="clAddOD" name="clAddOD" placeholder="e.g., LO" value="">
                    </div>
                    <div class="form-group va-item">
                        <label for="clAddOS">Add (for multifocal) OS</label>
                        <input type="text" id="clAddOS" name="clAddOS" placeholder="e.g., LO" value="">
                    </div>
                </div>
            </fieldset>

            <fieldset class="section">
                <legend>Assessment & Plan</legend>
                <div class="form-group">
                    <label for="assessmentDiagnoses">Assessment / Diagnoses <sup>*</sup></label>
                    <textarea id="assessmentDiagnoses" name="assessmentDiagnoses" rows="5" placeholder="1. Contact Lens Induced Dry Eye OU&#10;2. Successful CL fit OU (new patient)&#10;3. Myopia OU" required aria-required="true">1. Contact Lens Induced Dry Eye OU (H16.223)
2. Contact Lens Induced Papillary Conjunctivitis OS (H10.122)
3. Tight Contact Lens Fit OD (H27.121)
4. Myopia OU (H52.1)
5. New CL trial successful OU with MyDay Daily Disposable.</textarea>
                </div>
                <div class="form-group">
                    <label for="plan">Plan <sup>*</sup></label>
                    <textarea id="plan" name="plan" rows="5" placeholder="1. Dispense trial of Dailies Total 1, daily replacement.&#10;2. Patient education on proper hygiene, wear schedule, and signs of complications.&#10;3. RTC 1 week for CL follow-up.&#10;4. Prescribe new CL Rx (details below)." required aria-required="true">1. Discontinue current Acuvue Oasys 1-Day lenses.
2. Dispense trial of MyDay Daily Disposable lenses OU (OD: -3.00 DS, OS: -3.25 DS) with BC 8.4, DIA 14.2.
3. Patient education on proper insertion/removal, importance of daily replacement, and artificial tear use (Systane Hydration PF).
4. RTC 1 week for CL follow-up and assessment of new fit and comfort.
5. Upon successful follow-up, provide 1-year prescription for MyDay Daily Disposable lenses.</textarea>
                </div>
                 <div class="form-group">
                    <label>CL Rx Issued? <sup>*</sup></label>
                    <div class="input-group-inline">
                        <input type="radio" id="clRxIssuedYes" name="clRxIssued" value="Yes" required aria-required="true" aria-controls="contactLensRx_group" checked>
                        <label for="clRxIssuedYes">Yes</label>
                        <input type="radio" id="clRxIssuedNo" name="clRxIssued" value="No" required aria-required="true" aria-controls="contactLensRx_group">
                        <label for="clRxIssuedNo">No</label>
                    </div>
                </div>
                <div class="form-group conditional-group" id="contactLensRx_group" aria-expanded="true" aria-describedby="clRxIssuedYes clRxIssuedNo">
                    <label for="contactLensRx">Contact Lens Prescription</label>
                    <textarea id="contactLensRx" name="contactLensRx" rows="3" placeholder="e.g., OD: Dailies Total 1, -3.00DS, BC 8.5, DIA 14.1. OS: Dailies Total 1, -3.25DS, BC 8.5, DIA 14.1.">OD: MyDay Daily Disposable, -3.00 DS, BC 8.4, DIA 14.2. 
OS: MyDay Daily Disposable, -3.25 DS, BC 8.4, DIA 14.2. Quantity: 90 lenses per eye (3-month supply).</textarea>
                </div>
                <div class="form-group">
                    <label for="prognosis">Prognosis</label>
                    <textarea id="prognosis" name="prognosis" rows="2" placeholder="e.g., Good with proper care and follow-up.">Good with change to new daily disposable lens material and regular use of artificial tears.</textarea>
                </div>
                <div class="form-group">
                    <label for="followUpInstructions">Follow Up Instructions</label>
                    <textarea id="followUpInstructions" name="followUpInstructions" rows="3" placeholder="e.g., Return in 1 week for contact lens follow-up. Immediately remove lenses and call if pain, redness, or vision changes.">Return in 1 week (on [Date + 7 days]) for contact lens follow-up. Use new MyDay lenses. Use Systane Hydration PF 2-3 times daily. Immediately remove lenses and call office if experiencing severe pain, redness, discharge, or sudden vision changes.</textarea>
                </div>
            </fieldset>

            <fieldset class="section">
                <legend>Notes & Reflection</legend>
                <div class="form-group">
                    <label for="internalNotes">Internal Notes (Not for Patient)</label>
                    <textarea id="internalNotes" name="internalNotes" rows="3">Patient was cooperative. Counseled on lens rotation if comfort is still an issue. Explained benefits of higher Dk/t and different material for dry eye.</textarea>
                </div>
                <div class="form-group">
                    <label for="notesReflection">Personal Reflection/Learning Points</label>
                    <textarea id="notesReflection" name="notesReflection" rows="4">This case highlighted the importance of re-evaluating lens parameters and materials when patients experience comfort issues, even with a seemingly good lens. The change in material and fit seems promising for resolving dryness and tight fit issues. Thorough patient education on compliance and dry eye management is crucial.</textarea>
                </div>
            </fieldset>
        </form>
    </main>

    <footer>
        <p>&copy; 2025 Focus CaseX. All rights reserved.</p>
        <p>Powered by Focus</p>
    </footer>

    <!-- Your main application script for form logic -->
    <script src="contactlens-case-script.js"></script>
    <!-- The PDF export handler script for general case -->
    <script src="contactlens-case-pdf.js"></script> 
</body>
</html>